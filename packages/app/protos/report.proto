syntax = "proto3";
/*
google.protobuf.Any
https://github.com/grpc/grpc-node/issues/375
https://github.com/nestjs/nest/issues/4621
https://github.com/protocolbuffers/protobuf/issues/2612
https://github.com/protobufjs/protobuf.js/issues/435
https://developers.google.com/protocol-buffers/docs/proto3#any
*/
import "google/protobuf/any.proto";

package report;

service ReportService {
  rpc Register (Client) returns (GrpcResult);
  rpc GetPortAndUserRelation (ClientById) returns (GrpcResult);
}

message Client {
    string ip = 1;

    string domain = 2;

    string port = 3;

    int32 isOnline = 4;

    string lastCommunicationTime = 5;
}

message ClientById {
  string id = 1;
}

message GrpcResult {
  bool success = 1;
  string message = 2;
  google.protobuf.Any data = 3;
}